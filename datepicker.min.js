var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.datepicker=t()}(this,function(){"use strict";function e(e,t){var r=n(e,t),a=r.startDate,i=r.dateSelected;return s(a||i,r),r}function t(e,t){if(x.find(function(e){return e.el===t}))throw"A datepicker already exists on that element.";var n=e.position,r=e.maxDate,s=e.minDate,i=e.dateSelected,o=e.customMonths,l=e.customDays,c=e.overlayPlaceholder,d=e.overlayButton,u=e.startDay,h=e.disabledDates;if(e.hasOwnProperty("id")&&null==e.id)throw"Id cannot be `null` or `undefined`";if(e.id){var y=x.reduce(function(t,n){return n.id===e.id&&t.push(n),t},[]);if(y.length>1)throw"Only two datepickers can share an id.";y.length&&(e.sibling=y[0])}e.disabledDates=(h||[]).map(function(e){if(!f(e))throw'You supplied an invalid date to "options.disabledDates".';if(+v(e)==+v(i))throw'"disabledDates" cannot contain the same date as "dateSelected".';return+v(e)});var p=["tr","tl","br","bl","c"].some(function(e){return n===e});if(n&&!p)throw'"options.position" must be one of the following: tl, tr, bl, br, or c.';if(e.position=a(n||"bl"),["startDate","dateSelected","minDate","maxDate"].forEach(function(t){if(e[t]){if(!f(e[t])||isNaN(+e[t]))throw'"options.'+t+'" needs to be a valid JavaScript Date object.';e[t]=v(e[t])}}),e.startDate=v(e.startDate||e.dateSelected||new Date),r<s)throw'"maxDate" in options is less than "minDate".';if(i){if(s>i)throw'"dateSelected" in options is less than "minDate".';if(r<i)throw'"dateSelected" in options is greater than "maxDate".'}if(["onSelect","onShow","onHide","onMonthChange","formatter","disabler"].forEach(function(t){e[t]="function"==typeof e[t]&&e[t]}),[o,l].forEach(function(t,n){if(t){var r=['"customMonths" must be an array with 12 strings.','"customDays" must be an array with 7 strings.'];if(!Array.isArray(t)||t.length!==(n?7:12)||t.some(function(e){return"string"!=typeof e}))throw r[n];e[n?"days":"months"]=t}}),u&&+u>0&&+u<7){var m=(e.customDays||L).slice(),b=m.splice(0,u);e.customDays=m.concat(b),e.startDay=+u,e.weekendIndices=[m.length-1,m.length]}else e.startDay=0,e.weekendIndices=[6,0];return"string"!=typeof c&&delete e.overlayPlaceholder,"string"!=typeof d&&delete e.overlayButton,e}function n(e,n){var a="string"==typeof e?document.querySelector(e):e,s=t(n||r(),a),i=s.startDate,o=s.dateSelected,l=a===document.body,c=l?document.body:a.parentElement,u=document.createElement("div");u.className="qs-datepicker qs-hidden";var h={el:a,parent:c,nonInput:"INPUT"!==a.nodeName,noPosition:l,position:!l&&s.position,startDate:i,dateSelected:o,disabledDates:s.disabledDates,minDate:s.minDate,maxDate:s.maxDate,noWeekends:!!s.noWeekends,weekendIndices:s.weekendIndices,calendar:u,currentMonth:(i||o).getMonth(),currentMonthName:(s.months||Y)[(i||o).getMonth()],currentYear:(i||o).getFullYear(),setDate:g,remove:M,setMin:w,setMax:D,onSelect:s.onSelect,onShow:s.onShow,onHide:s.onHide,onMonthChange:s.onMonthChange,formatter:s.formatter,disabler:s.disabler,months:s.months||Y,days:s.customDays||L,startDay:s.startDay,overlayPlaceholder:s.overlayPlaceholder||"4-digit year",overlayButton:s.overlayButton||"Submit",disableYearOverlay:s.disableYearOverlay,disableMobile:s.disableMobile,isMobile:"ontouchstart"in window,alwaysShow:!!s.alwaysShow,id:s.id};return s.sibling&&(h.sibling=s.sibling,h.sibling.first=!0,s.sibling.sibling=h),o&&d(a,h),x.push(h),l||"static"!==getComputedStyle(c).position||(h.parentCssText=c.style.cssText,c.style.cssText+="position: relative;"),x.filter(function(e){return e.hasOwnProperty("parentCssText")}).forEach(function(e){x.forEach(function(t){t===e||t.hasOwnProperty("parentCssText")||t.parent===e.parent&&(t.parentCssText=e.parentCssText)})}),c.appendChild(u),h.alwaysShow&&p(h),h}function r(){return{startDate:v(new Date),position:"bl"}}function a(e){var t=_slicedToArray(e,2),n=t[0],r=t[1],a={};return a[T[n]]=1,r&&(a[T[r]]=1),a}function s(e,t){var n=t.calendar.querySelector(".qs-overlay"),r=n&&!n.classList.contains("qs-hidden");t.calendar.innerHTML=[i(e,t,r),o(e,t,r),l(t,r)].join(""),r&&setTimeout(function(){return m(!0,t)},10)}function i(e,t,n){return'\n      <div class="qs-controls '+(n?"qs-blur":"")+'">\n        <div class="qs-arrow qs-left"></div>\n        <div class="qs-month-year">\n          <span class="qs-month">'+t.months[e.getMonth()]+'</span>\n          <span class="qs-year">'+e.getFullYear()+'</span>\n        </div>\n        <div class="qs-arrow qs-right"></div>\n      </div>\n    '}function o(e,t,n){var r=t.currentMonth,a=t.currentYear,s=t.dateSelected,i=t.maxDate,o=t.minDate,l=t.days,c=t.disabledDates,d=t.disabler,u=t.noWeekends,h=t.startDay,f=t.weekendIndices,y=new Date,p=a===y.getFullYear()&&r===y.getMonth(),m=v(new Date(e).setDate(1)),b=m.getDay()-h,q=b<0?7:0;m.setMonth(m.getMonth()+1),m.setDate(0);var g=m.getDate(),w=[],D=q+7*((b+g)/7|0);D+=(b+g)%7?7:0,0!==h&&0===b&&(D+=7);for(var S=1;S<=D;S++){var M=(S-1)%7,x=l[M],L=S-(b>=0?b:7+b),Y=new Date(a,r,L),T=L<1||L>g,C="",k='<span class="qs-num">'+L+"</span>";if(T)C="qs-empty",k="";else{var E=o&&Y<o||i&&Y>i||d&&d(Y)||c.includes(+v(Y)),N=f.includes(M),A=p&&!E&&L===y.getDate();E=E||u&&N,C=E?"qs-disabled":A?"qs-current":""}+Y!=+s||T||(C+=" qs-active"),w.push('<div class="qs-square qs-num '+x+" "+C+'">'+k+"</div>")}var I=l.map(function(e){return'<div class="qs-square qs-day">'+e+"</div>"}).concat(w);if(I.length%7!=0)throw"Calendar not constructed properly. The # of squares should be a multiple of 7.";return I.unshift('<div class="qs-squares '+(n?"qs-blur":"")+'">'),I.push("</div>"),I.join("")}function l(e,t){var n=e.overlayPlaceholder,r=e.overlayButton;return'\n      <div class="qs-overlay '+(t?"":"qs-hidden")+'">\n        <div class="qs-close">&#10005;</div>\n        <input class="qs-overlay-year" placeholder="'+n+'" />\n        <div class="qs-submit qs-disabled">'+r+"</div>\n      </div>\n    "}function c(e,t,n){var r=t.currentMonth,a=t.currentYear,s=t.calendar,i=t.el,o=t.onSelect,l=s.querySelector(".qs-active"),c=e.textContent;t.dateSelected=n?void 0:new Date(a,r,c),l&&l.classList.remove("qs-active"),n||e.classList.add("qs-active"),d(i,t,n),!n&&y(t),o&&o(t,n?void 0:new Date(t.dateSelected))}function d(e,t,n){if(!t.nonInput)return n?e.value="":t.formatter?t.formatter(e,t.dateSelected,t):void(e.value=t.dateSelected.toDateString())}function u(e,t,n){n?t.currentYear=n:(t.currentMonth+=e.contains("qs-right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):-1===t.currentMonth&&(t.currentMonth=11,t.currentYear--)),t.currentMonthName=t.months[t.currentMonth],s(new Date(t.currentYear,t.currentMonth,1),t),t.onMonthChange&&t.onMonthChange(t)}function h(e){if(!e.noPosition){var t=e.el,n=e.calendar,r=e.position,a=e.parent,s=r.top,i=r.right;if(r.centered)return n.classList.add("qs-centered");var o=a.getBoundingClientRect(),l=t.getBoundingClientRect(),c=n.getBoundingClientRect(),d=l.top-o.top+a.scrollTop,u="\n      top:"+(d-(s?c.height:-1*l.height))+"px;\n      left:"+(l.left-o.left+(i?l.width-c.width:0))+"px;\n    ";n.setAttribute("style",u)}}function f(e){return"[object Date]"==={}.toString.call(e)&&"Invalid Date"!==e.toString()}function v(e){var t=new Date(+e);if(null!=e&&f(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function y(e){m(!0,e),!e.alwaysShow&&e.calendar.classList.add("qs-hidden"),e.onHide&&e.onHide(e)}function p(e){e.calendar.classList.remove("qs-hidden"),h(e),e.onShow&&e.onShow(e)}function m(e,t){var n=t.calendar,r=n.querySelector(".qs-overlay"),a=r.querySelector(".qs-overlay-year"),s=n.querySelector(".qs-controls"),i=n.querySelector(".qs-squares");e?(r.classList.add("qs-hidden"),s.classList.remove("qs-blur"),i.classList.remove("qs-blur"),a.value=""):(r.classList.remove("qs-hidden"),s.classList.add("qs-blur"),i.classList.add("qs-blur"),a.focus())}function b(e,t,n){var r=isNaN(+(new Date).setFullYear(t.value||void 0));if(13===e.which||"click"===e.type){if(r||t.classList.contains("qs-disabled"))return;u(null,n,t.value,!0)}else if(n.calendar.contains(t)){var a=n.calendar.querySelector(".qs-submit");a.classList[r?"add":"remove"]("qs-disabled")}}function q(e){var t=e.type,n=e.target,r=n.classList,a=x.find(function(e){var t=e.calendar,r=e.el;return t.contains(n)||r===n}),s=a&&a.calendar.contains(n);if(!(a&&a.isMobile&&a.disableMobile))if("click"===t){if(!a)return x.forEach(y);var i=a.calendar,o=a.disableYearOverlay,l=!!i.querySelector(".qs-hidden"),d=i.querySelector(".qs-month-year").contains(n);if(a.noPosition&&!s){var h=i.classList.contains("qs-hidden");(h?p:y)(a)}else if(r.contains("qs-arrow"))u(r,a);else if(d||r.contains("qs-close"))!o&&m(!l,a);else{if(r.contains("qs-num")){var f="SPAN"===n.nodeName?n.parentNode:n,v=["qs-disabled","qs-empty"].some(function(e){return f.classList.contains(e)});return f.classList.contains("qs-active")?c(f,a,!0):!v&&c(f,a)}if(r.contains("qs-submit")&&!r.contains("qs-disabled")){var q=i.querySelector(".qs-overlay-year");b(e,q,a)}}}else if("focusin"===t&&a)p(a),x.forEach(function(e){return e!==a&&y(e)});else if("keydown"===t&&a){var g=a.calendar.querySelector(".qs-overlay"),w=!g.classList.contains("qs-hidden");13===e.which&&w&&s?b(e,n,a):27===e.which&&w&&s&&m(!0,a)}else if("input"===t){if(!a)return;var D=n.parentElement.querySelector(".qs-submit"),S=n.value.split("").filter(function(e){return e.match(/[0-9]/)}).join("").slice(0,4);n.value=S,D.classList[4===S.length?"remove":"add"]("qs-disabled")}}function g(e,t){var n=v(e),r=this.currentYear,a=this.currentMonth;if(void 0!==n&&!n)throw"`setDate` needs a JavaScript Date object.";if(void 0===n)return this.dateSelected=void 0,this.sibling&&(this.first?this.setMin():this.setMax()),d(this.el,this,!0),s(new Date(this.currentYear,this.currentMonth),this),this;if(this.disabledDates.some(function(e){return+e==+n})||n<this.minDate||n>this.maxDate)throw"You can't manually set a date that's disabled.";if(this.currentYear=n.getFullYear(),this.currentMonth=n.getMonth(),this.currentMonthName=this.months[n.getMonth()],this.dateSelected=n,d(this.el,this),(r===n.getFullYear()&&a===n.getMonth()||t)&&s(n,this),this.sibling){var i=this.first?"setMin":"setMax";this[i](n),this.sibling[i](n)}return this}function w(e){return S(this,e,!0)}function D(e){return S(this,e)}function S(e,t,n,r){if(void 0!=t&&!f(t))throw"Invalid date passed to set"+(n?"Min":"Max");var a=v(e.dateSelected);return t=v(t),a&&(e.sibling?e.first&&n&&a>t?e.dateSelected=v(t):!e.first&&!n&&a<t&&(e.dateSelected=v(t)):(n&&a<t||!n&&a>t)&&(e.dateSelected=void 0,e.nonInput||(e.el.value=""))),e[n?"minDate":"maxDate"]=t,s(e.dateSelected||e.startDate,e),!r&&e.sibling&&S(e.sibling,t,n,!0),e}function M(){var e=this,t=this.parentCssText,n=this.parent,r=this.calendar,a=this.el,s=this.sibling;if(s&&delete s.sibling,void 0!==t){x.some(function(t){return t!==e&&t.parent===n})||(n.style.cssText=t)}r.remove(),x=x.filter(function(e){return e.el!==a}),x.length||C.forEach(function(e){return window.removeEventListener(e,q)})}Array.prototype.includes||(Array.prototype.includes=function(e){return this.reduce(function(t,n){return t||n===e},!1)});var x=[],L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Y=["January","February","March","April","May","June","July","August","September","October","November","December"],T={t:"top",r:"right",b:"bottom",l:"left",c:"centered"},C=["click","focusin","keydown","input"];return C.forEach(function(e){return window.addEventListener(e,q)}),e});