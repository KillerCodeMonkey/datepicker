var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.datepicker=t()}(this,function(){"use strict";function e(e,t){var a=n(e,t),r=a.startDate,i=a.dateSelected;return s(r||i,a),a}function t(e,t){if(L.find(function(e){return e.el===t}))throw"A datepicker already exists on that element.";var n=e.position,a=e.maxDate,s=e.minDate,i=e.dateSelected,o=e.customMonths,l=e.customDays,c=e.overlayPlaceholder,d=e.overlayButton,u=e.startDay,h=e.disabledDates;if(e.hasOwnProperty("id")&&null==e.id)throw"Id cannot be `null` or `undefined`";if(e.id){var v=L.reduce(function(t,n){return n.id===e.id&&t.push(n),t},[]);if(v.length>1)throw"Only two datepickers can share an id.";v.length&&(e.sibling=v[0])}e.disabledDates=(h||[]).map(function(e){if(!f(e))throw'You supplied an invalid date to "options.disabledDates".';if(+y(e)==+y(i))throw'"disabledDates" cannot contain the same date as "dateSelected".';return+y(e)});var p=["tr","tl","br","bl","c"].some(function(e){return n===e});if(n&&!p)throw'"options.position" must be one of the following: tl, tr, bl, br, or c.';if(e.position=r(n||"bl"),["startDate","dateSelected","minDate","maxDate"].forEach(function(t){if(e[t]){if(!f(e[t])||isNaN(+e[t]))throw'"options.'+t+'" needs to be a valid JavaScript Date object.';e[t]=y(e[t])}}),e.startDate=y(e.startDate||e.dateSelected||new Date),a<s)throw'"maxDate" in options is less than "minDate".';if(i){if(s>i)throw'"dateSelected" in options is less than "minDate".';if(a<i)throw'"dateSelected" in options is greater than "maxDate".'}if(["onSelect","onShow","onHide","onMonthChange","formatter"].forEach(function(t){e[t]="function"==typeof e[t]&&e[t]}),[o,l].forEach(function(t,n){if(t){var a=['"customMonths" must be an array with 12 strings.','"customDays" must be an array with 7 strings.'];if(!Array.isArray(t)||t.length!==(n?7:12)||t.some(function(e){return"string"!=typeof e}))throw a[n];e[n?"days":"months"]=t}}),u&&+u>0&&+u<7){var m=(e.customDays||T).slice(),q=m.splice(0,u);e.customDays=m.concat(q),e.startDay=+u,e.weekendIndices=[m.length-1,m.length]}else e.startDay=0,e.weekendIndices=[6,0];return"string"!=typeof c&&delete e.overlayPlaceholder,"string"!=typeof d&&delete e.overlayButton,e}function n(e,n){var r="string"==typeof e?document.querySelector(e):e;n=t(n||a(),r);var s=n,i=s.startDate,o=s.dateSelected,l=r===document.body,c=l?document.body:r.parentElement,u=document.createElement("div");u.className="qs-datepicker qs-hidden";var h={el:r,parent:c,nonInput:"INPUT"!==r.nodeName,noPosition:l,position:!l&&n.position,startDate:i,dateSelected:o,disabledDates:n.disabledDates,minDate:n.minDate,maxDate:n.maxDate,noWeekends:!!n.noWeekends,weekendIndices:n.weekendIndices,calendar:u,currentMonth:(i||o).getMonth(),currentMonthName:(n.months||Y)[(i||o).getMonth()],currentYear:(i||o).getFullYear(),setDate:w,reset:D,remove:x,setMin:g,setMax:S,onSelect:n.onSelect,onShow:n.onShow,onHide:n.onHide,onMonthChange:n.onMonthChange,formatter:n.formatter,months:n.months||Y,days:n.customDays||T,startDay:n.startDay,overlayPlaceholder:n.overlayPlaceholder||"4-digit year",overlayButton:n.overlayButton||"Submit",disableYearOverlay:n.disableYearOverlay,disableMobile:n.disableMobile,isMobile:"ontouchstart"in window,alwaysShow:!!n.alwaysShow,id:n.id};return n.sibling&&(h.sibling=n.sibling,n.sibling.sibling=h),o&&d(r,h),L.push(h),l||"static"!==getComputedStyle(c).position||(h.parentCssText=c.style.cssText,c.style.cssText+="position: relative;"),L.filter(function(e){return e.hasOwnProperty("parentCssText")}).forEach(function(e){L.forEach(function(t){t===e||t.hasOwnProperty("parentCssText")||t.parent===e.parent&&(t.parentCssText=e.parentCssText)})}),c.appendChild(u),h.alwaysShow&&p(h),h}function a(){return{startDate:y(new Date),position:"bl"}}function r(e){var t=_slicedToArray(e,2),n=t[0],a=t[1],r={};return r[C[n]]=1,a&&(r[C[a]]=1),r}function s(e,t){var n=t.calendar.querySelector(".qs-overlay"),a=n&&!n.classList.contains("qs-hidden");t.calendar.innerHTML=[i(e,t,a),o(e,t,a),l(t,a)].join(""),a&&setTimeout(function(){return m(!0,t)},10)}function i(e,t,n){return'\n      <div class="qs-controls '+(n?"qs-blur":"")+'">\n        <div class="qs-arrow qs-left"></div>\n        <div class="qs-month-year">\n          <span class="qs-month">'+t.months[e.getMonth()]+'</span>\n          <span class="qs-year">'+e.getFullYear()+'</span>\n        </div>\n        <div class="qs-arrow qs-right"></div>\n      </div>\n    '}function o(e,t,n){var a=t.currentMonth,r=t.currentYear,s=t.dateSelected,i=t.maxDate,o=t.minDate,l=t.days,c=t.disabledDates,d=t.noWeekends,u=t.startDay,h=t.weekendIndices,f=new Date,v=r===f.getFullYear()&&a===f.getMonth(),p=y(new Date(e).setDate(1)),m=p.getDay()-u,q=m<0?7:0;p.setMonth(p.getMonth()+1),p.setDate(0);var b=p.getDate(),D=[],w=q+7*((m+b)/7|0);w+=(m+b)%7?7:0,0!==u&&0===m&&(w+=7);for(var g=1;g<=w;g++){var S=(g-1)%7,M=l[S],x=g-(m>=0?m:7+m),L=new Date(r,a,x),T=x<1||x>b,Y="",C='<span class="qs-num">'+x+"</span>";if(T)Y="qs-empty",C="";else{var k=o&&L<o||i&&L>i||c.includes(+y(L)),E=h.includes(S),N=v&&!k&&x===f.getDate();k=k||d&&E,Y=k?"qs-disabled":N?"qs-current":""}+L!=+s||T||(Y+=" qs-active"),D.push('<div class="qs-square qs-num '+M+" "+Y+'">'+C+"</div>")}var A=l.map(function(e){return'<div class="qs-square qs-day">'+e+"</div>"}).concat(D);if(A.length%7!=0)throw"Calendar not constructed properly. The # of squares should be a multiple of 7.";return A.unshift('<div class="qs-squares '+(n?"qs-blur":"")+'">'),A.push("</div>"),A.join("")}function l(e,t){var n=e.overlayPlaceholder,a=e.overlayButton;return'\n      <div class="qs-overlay '+(t?"":"qs-hidden")+'">\n        <div class="qs-close">&#10005;</div>\n        <input class="qs-overlay-year" placeholder="'+n+'" />\n        <div class="qs-submit qs-disabled">'+a+"</div>\n      </div>\n    "}function c(e,t,n){var a=t.currentMonth,r=t.currentYear,s=t.calendar,i=t.el,o=t.onSelect,l=s.querySelector(".qs-active"),c=e.textContent;t.dateSelected=n?null:new Date(r,a,c),l&&l.classList.remove("qs-active"),n||e.classList.add("qs-active"),d(i,t,n),!n&&v(t),o&&o(t,n?null:new Date(t.dateSelected))}function d(e,t,n){if(!t.nonInput)return n?e.value="":t.formatter?t.formatter(e,t.dateSelected,t):void(e.value=t.dateSelected.toDateString())}function u(e,t,n){n?t.currentYear=n:(t.currentMonth+=e.contains("qs-right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):-1===t.currentMonth&&(t.currentMonth=11,t.currentYear--)),t.currentMonthName=t.months[t.currentMonth],s(new Date(t.currentYear,t.currentMonth,1),t),t.onMonthChange&&t.onMonthChange(t)}function h(e){if(!e.noPosition){var t=e.el,n=e.calendar,a=e.position,r=e.parent,s=a.top,i=a.right;if(a.centered)return n.classList.add("qs-centered");var o=r.getBoundingClientRect(),l=t.getBoundingClientRect(),c=n.getBoundingClientRect(),d=l.top-o.top+r.scrollTop,u="\n      top:"+(d-(s?c.height:-1*l.height))+"px;\n      left:"+(l.left-o.left+(i?l.width-c.width:0))+"px;\n    ";n.setAttribute("style",u)}}function f(e){return"[object Date]"==={}.toString.call(e)&&"Invalid Date"!==e.toString()}function y(e){var t=new Date(+e);return f(t)?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null}function v(e){m(!0,e),!e.alwaysShow&&e.calendar.classList.add("qs-hidden"),e.onHide&&e.onHide(e)}function p(e){e.calendar.classList.remove("qs-hidden"),h(e),e.onShow&&e.onShow(e)}function m(e,t){var n=t.calendar,a=n.querySelector(".qs-overlay"),r=a.querySelector(".qs-overlay-year"),s=n.querySelector(".qs-controls"),i=n.querySelector(".qs-squares");e?(a.classList.add("qs-hidden"),s.classList.remove("qs-blur"),i.classList.remove("qs-blur"),r.value=""):(a.classList.remove("qs-hidden"),s.classList.add("qs-blur"),i.classList.add("qs-blur"),r.focus())}function q(e,t,n){var a=isNaN(+(new Date).setFullYear(t.value||void 0));if(13===e.which||"click"===e.type){if(a||t.classList.contains("qs-disabled"))return;u(null,n,t.value,!0)}else if(n.calendar.contains(t)){var r=n.calendar.querySelector(".qs-submit");r.classList[a?"add":"remove"]("qs-disabled")}}function b(e){var t=e.type,n=e.target,a=n.classList,r=L.find(function(e){var t=e.calendar,a=e.el;return t.contains(n)||a===n}),s=r&&r.calendar.contains(n);if(!(r&&r.isMobile&&r.disableMobile))if("click"===t){if(!r)return L.forEach(v);var i=r.calendar,o=r.disableYearOverlay,l=!!i.querySelector(".qs-hidden"),d=i.querySelector(".qs-month-year").contains(n);if(r.noPosition&&!s){var h=i.classList.contains("qs-hidden");(h?p:v)(r)}else if(a.contains("qs-arrow"))u(a,r);else if(d||a.contains("qs-close"))!o&&m(!l,r);else{if(a.contains("qs-num")){var f="SPAN"===n.nodeName?n.parentNode:n,y=["qs-disabled","qs-empty"].some(function(e){return f.classList.contains(e)});return f.classList.contains("qs-active")?c(f,r,!0):!y&&c(f,r)}if(a.contains("qs-submit")&&!a.contains("qs-disabled")){var b=i.querySelector(".qs-overlay-year");q(e,b,r)}}}else if("focusin"===t&&r)p(r),L.forEach(function(e){return e!==r&&v(e)});else if("keydown"===t&&r){var D=r.calendar.querySelector(".qs-overlay"),w=!D.classList.contains("qs-hidden");13===e.which&&w&&s?q(e,n,r):27===e.which&&w&&s&&m(!0,r)}else if("input"===t){if(!r)return;var g=n.parentElement.querySelector(".qs-submit"),S=n.value.split("").filter(function(e){return e.match(/[0-9]/)}).join("").slice(0,4);n.value=S,g.classList[4===S.length?"remove":"add"]("qs-disabled")}}function D(){return this.setDate(this.startDate,!0),this}function w(e,t){if(!(e=y(e)))throw"`setDate` needs a JavaScript Date object.";if((this.disabledDates||[]).some(function(t){return+t==+y(e)})||e<this.minDate||e>this.maxDate)throw"You tried to manually set a date that's disabled.";return this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentMonthName=this.months[e.getMonth()],this.dateSelected=t?void 0:e,!t&&d(this.el,this),s(e,this),t&&(this.el.value=""),this}function g(e){return M(this,e,!0)}function S(e){return M(this,e)}function M(e,t,n){if(void 0!==t&&!f(t))throw"Invalid date passed to set"+(n?"Min":"Max");var a=y(e.dateSelected);return t=y(t),a&&(n&&a<t||!n&&a>t)&&(e.dateSelected=null,e.nonInput||(e.el.value="")),e[n?"minDate":"maxDate"]=t,s(e.dateSelected||e.startDate,e),e}function x(){var e=this,t=this.parentCssText,n=this.parent,a=this.calendar,r=this.el,s=this.sibling;if(s&&delete s.sibling,void 0!==t){L.some(function(t){return t!==e&&t.parent===n})||(n.style.cssText=t)}a.remove(),L=L.filter(function(e){return e.el!==r}),L.length||k.forEach(function(e){return window.removeEventListener(e,b)})}Array.prototype.includes||(Array.prototype.includes=function(e){return this.reduce(function(t,n){return t||n===e},!1)});var L=[],T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Y=["January","February","March","April","May","June","July","August","September","October","November","December"],C={t:"top",r:"right",b:"bottom",l:"left",c:"centered"},k=["click","focusin","keydown","input"];return k.forEach(function(e){return window.addEventListener(e,b)}),e});